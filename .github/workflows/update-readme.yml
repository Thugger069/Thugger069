name: 游랙 Q.R.I.P README Update | v7.5 游래
on:
  push:
    branches:
      - main
  schedule:
    - cron: '0 * * * *' # Every hour UTC
jobs:
  update-readme:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Set up Node.js 20
        uses: actions/setup-node@v3
        with:
          node-version: '20'
          cache: 'pnpm'

      - name: Install Dependencies
        run: |
          corepack enable
          corepack prepare pnpm@latest --activate
          pnpm install

      - name: Generate Typing SVG
        run: |
          mkdir -p assets
          curl -s "https://readme-typing-svg.herokuapp.com?font=Ubuntu+Mono&weight=600&size=22&duration=2000&pause=500&color=00F3FF&background=0a0a0f00&center=true&lines=Hello+World;Quantum+Developer;Cyberpunk+Architect" -o assets/typing.svg

      - name: Generate Cyberpunk Header
        run: |
          chmod +x scripts/generate-header.js
          node scripts/generate-header.js

      - name: Generate Terminal Snake & GitHub Activity
        run: |
          chmod +x scripts/generate-terminal-svg.js
          node scripts/generate-terminal-svg.js

      - name: Generate GitHub Stats & Languages
        run: |
          mkdir -p assets/stats
          curl -s "https://github-readme-stats.vercel.app/api?username=Thugger069&show_icons=true&theme=dark&hide_border=true&count_private=true" -o assets/stats/github-stats.svg
          curl -s "https://github-readme-stats.vercel.app/api/top-langs/?username=Thugger069&layout=compact&theme=dark" -o assets/stats/top-langs.svg

      - name: Update README with Full Content
        run: ./scripts/update-readme.sh

      - name: Commit & Push Changes
        run: |
          git config user.name "Thugger069"
          git config user.email "noreply@github.com"
          git add README.md assets/*.svg assets/stats/*.svg
          if ! git diff --cached --quiet; then
            git commit -m "游랙 Q.R.I.P Cyberpunk README v7.5 update 游래 $(date -u +%Y%m%d%H%M%S)"
            git push
          else
            echo "No changes to commit"
